{
    "contents" : "#omkoding av 0 til missing \".\" i befolkning_hovedgruppe\noptions(scipen = 500)\nbefolkning_hovedgruppe <- read.csv(\"D:/R/imdikator-munch/data/befolkning_hovedgruppe.csv\", row.names=NULL, na.strings=\"NA\", stringsAsFactors=FALSE)\n\n#antall tabellvariabler som er 0\nsum(befolkning_hovedgruppe$tabellvariabel==0,na.rm=T)\ntemp=sum(befolkning_hovedgruppe$tabellvariabel==0,na.rm=T)\ntemp2=sum(befolkning_hovedgruppe$tabellvariabel==\".\",na.rm=T)\n#antall med 0 som er personer\nsum((befolkning_hovedgruppe$tabellvariabel==0&befolkning_hovedgruppe$enhet=='personer'),na.rm=T)\n#antall med 0 som er prosenter\nsum((befolkning_hovedgruppe$tabellvariabel==0&befolkning_hovedgruppe$enhet=='prosent'),na.rm=T)\n\n#setter alle verdier som er 0 lik \".\" for manglende data\nbefolkning_hovedgruppe$tabellvariabel[befolkning_hovedgruppe$tabellvariabel==0]=\".\"\n\n#sjekk av at det ikke lenger finnes tabellvariabler som er 0\nsum(befolkning_hovedgruppe$tabellvariabel==0,na.rm=T)\nsum(befolkning_hovedgruppe$tabellvariabel==0,na.rm=T)==0\n#sjekk av at antallet som før var 0 nå \".\"\nsum(befolkning_hovedgruppe$tabellvariabel==\".\",na.rm=T)\ntemp+temp2==sum(befolkning_hovedgruppe$tabellvariabel==\".\",na.rm=T)\n\n#skriver til csv-fil. Husk riktig csv-type\nwrite.csv(befolkning_hovedgruppe,\"D:/R/imdikator-munch/output/befolkning_hovedgruppe.csv\",row.names=F)\n\n#ALLE-KATEGORI I BEFOLKNING_ALDER\n#legger til en kategori for alle i befolkning_alder\nbefolkning_alder <- read.csv(\"D:/R/imdikator-munch/data/befolkning_alder.csv\", row.names=NULL, na.strings=\"NA\", stringsAsFactors=FALSE)\nlibrary(tidyr)\ndf=spread(befolkning_alder,alder_grupper,tabellvariabel)\ndf$alle=extract_numeric(df[,10])+extract_numeric(df[,11])+extract_numeric(df[,12])+extract_numeric(df[,13])+extract_numeric(df[,14])+extract_numeric(df[,15])+extract_numeric(df[,16])\nsum(is.na(df$alle))\ndf$alle[is.na(df$alle)]=\".\"\nsum(is.na(df$alle))\nsum(df$alle==\".\")\ndf_2=gather(df,alder_grupper,tabellvariabel,`0_5`:alle)\n\n#lager kontroll-frame av df med de nye observasjonene\ndf_kontroll=subset(df,select=c(aar:kommune_nr,alle))\ndf_kontroll=gather(df_kontroll,alder_grupper,tabellvariabel,alle)\n\n#trenger en feilsjekk for å sikre at alt er likt, med unntak av alder_grupper.alle\n#kan fungere, virker som overkill?\n#library(compare)\n#comparison=compare(befolkning_alder,df_2)\n\nlibrary(dplyr)\n#trekker ut enheter som er i df_2 som ikke er i befolkning_alder - altså de nye enhetene\ncomparison_2=anti_join(df_2,befolkning_alder)\n#trekker ut enheter som er nye i df_2 som ikke er en del av de nye observasjonene\ncomparison_3=anti_join(comparison_2,df_kontroll)\n#comparison_3 skal være lik 0\nnrow(comparison_3)==0\n\nwrite.csv(df_2,\"D:/R/imdikator-munch/output/befolkning_alder.csv\",row.names=F)\n\n#ALLE-KATEGORI I BEFOLKNING_VERDENSREGION\n#trenger alle-kategori for vreg_2, vreg_5 og vreg_9\nlibrary(tidyr)\nlibrary(dplyr)\nbefolkning_verdensregion <- read.csv(\"D:/R/imdikator-munch/data/befolkning_verdensregion.csv\", row.names=NULL, na.strings=\"NA\", stringsAsFactors=FALSE)\ndf=spread(befolkning_verdensregion,vreg_2,tabellvariabel)\n\ndf$alle=extract_numeric(df[,10])+extract_numeric(df[,11])+extract_numeric(df[,12])+extract_numeric(df[,13])+extract_numeric(df[,14])+extract_numeric(df[,15])+extract_numeric(df[,16])\nsum(is.na(df$alle))\ndf$alle[is.na(df$alle)]=\".\"\nsum(is.na(df$alle))\nsum(df$alle==\".\")\ndf_2=gather(df,alder_grupper,tabellvariabel,`0_5`:alle)\n\n#lager kontroll-frame av df med de nye observasjonene\ndf_kontroll=subset(df,select=c(aar:kommune_nr,alle))\ndf_kontroll=gather(df_kontroll,alder_grupper,tabellvariabel,alle)\n\n#trenger en feilsjekk for å sikre at alt er likt, med unntak av alder_grupper.alle\n#kan fungere, virker som overkill?\n#library(compare)\n#comparison=compare(befolkning_alder,df_2)\n#trekker ut enheter som er i df_2 som ikke er i befolkning_alder - altså de nye enhetene\ncomparison_2=anti_join(df_2,befolkning_alder)\n#trekker ut enheter som er nye i df_2 som ikke er en del av de nye observasjonene\ncomparison_3=anti_join(comparison_2,df_kontroll)\n#comparison_3 skal være lik 0\nnrow(comparison_3)==0\n\nwrite.csv(df_2,\"D:/R/imdikator-munch/output/befolkning_alder.csv\",row.names=F)\n\n\n#ALLE-KATEGORI I UTDANNINGSNIVA",
    "created" : 1444155537387.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2748779181",
    "id" : "17DFBBAA",
    "lastKnownWriteTime" : 1444227034,
    "path" : "D:/R/imdikator-munch/rotering.R",
    "project_path" : "rotering.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}