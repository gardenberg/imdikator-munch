#problem med komma som desimaltegn, må gsubbes til punktum lenger opp
# logisk sjekk av antall observasjoner etter det
names(flyktning_botid_flytting)[3] = "kommune_nr"
flyktning_botid_flytting$enhet[flyktning_botid_flytting$enhet=="person"]="personer"
flyktning_botid_flytting = subset(flyktning_botid_flytting,select=-X)
levels(as.factor(flyktning_botid_flytting$botid_3))
levels(as.factor(flyktning_botid_flytting$forste_bosettingskommune))
flyktning_botid_flytting$botid_3 = gsub("\\-","_",flyktning_botid_flytting$botid_3)
flyktning_botid_flytting$tabellvariabel = gsub("\\,",".",flyktning_botid_flytting$tabellvariabel)
nlevels(as.factor(flyktning_botid_flytting$kommune_nr))
3*4*354*2==nrow(flyktning_botid_flytting)
df=spread(flyktning_botid_flytting,botid_3,tabellvariabel,drop=F)
df$alle_kopi=df$alle
df$alle=extract_numeric(df[,6])+extract_numeric(df[,7])
sum(is.na(df$alle))
df = subset(df,select=-alle_kopi)
sum(is.na(df$alle))
df_2=gather(df,botid_3,tabellvariabel,6:8,na.rm=F)
3*4*354*2==nrow(df_2)
write.csv(df_2,"D:/R/imdikator-munch/data_flat_output/flyktning_botid_flytting-kommune-2015.csv",row.names=F)
#FLYKTNING_BOTID_FLYTTING
#NÆRINGSREGION
flyktning_botid_flytting <- read.csv("D:/R/imdikator-munch/data_flat_input/flyktning_botid_flytting_N_2015.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
# naringsregion_id må bli naringsregion_nr
# fjerne ekstra kolonne
# kode om 0-4 til 0_4
#problem med komma som desimaltegn, må gsubbes til punktum lenger opp
# logisk sjekk av antall observasjoner etter det
names(flyktning_botid_flytting)[3] = "naringsregion_nr"
flyktning_botid_flytting$enhet[flyktning_botid_flytting$enhet=="person"]="personer"
flyktning_botid_flytting = subset(flyktning_botid_flytting,select=-X)
levels(as.factor(flyktning_botid_flytting$botid_3))
levels(as.factor(flyktning_botid_flytting$forste_bosettingskommune))
flyktning_botid_flytting$botid_3 = gsub("\\-","_",flyktning_botid_flytting$botid_3)
flyktning_botid_flytting$tabellvariabel = gsub("\\,",".",flyktning_botid_flytting$tabellvariabel)
nlevels(as.factor(flyktning_botid_flytting$naringsregion_nr))
3*4*83*2==nrow(flyktning_botid_flytting)
df=spread(flyktning_botid_flytting,botid_3,tabellvariabel,drop=F)
df$alle_kopi=df$alle
df$alle=extract_numeric(df[,6])+extract_numeric(df[,7])
sum(is.na(df$alle))
df = subset(df,select=-alle_kopi)
sum(is.na(df$alle))
df_2=gather(df,botid_3,tabellvariabel,6:8,na.rm=F)
3*4*83*2==nrow(df_2)
write.csv(df_2,"D:/R/imdikator-munch/data_flat_output/flyktning_botid_flytting-naringsregion-2015.csv",row.names=F)
#FLYKTNING_BOTID_FLYTTING
#FYLKE
flyktning_botid_flytting <- read.csv("D:/R/imdikator-munch/data_flat_input/flyktning_botid_flytting_F_2015.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
flyktning_botid_flytting_norge <- read.csv("D:/R/imdikator-munch/data_flat_input/flyktning_botid_flytting_L_2015.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
flyktning_botid_flytting = rbind (flyktning_botid_flytting,flyktning_botid_flytting_norge)
# fylke_id må bli fylke_nr
# fjerne ekstra kolonne
# kode om 0-4 til 0_4
#problem med komma som desimaltegn, må gsubbes til punktum lenger opp
# logisk sjekk av antall observasjoner etter det
names(flyktning_botid_flytting)[3] = "fylke_nr"
flyktning_botid_flytting$enhet[flyktning_botid_flytting$enhet=="person"]="personer"
flyktning_botid_flytting = subset(flyktning_botid_flytting,select=-X)
levels(as.factor(flyktning_botid_flytting$botid_3))
levels(as.factor(flyktning_botid_flytting$forste_bosettingskommune))
flyktning_botid_flytting$botid_3 = gsub("\\-","_",flyktning_botid_flytting$botid_3)
flyktning_botid_flytting$tabellvariabel = gsub("\\,",".",flyktning_botid_flytting$tabellvariabel)
nlevels(as.factor(flyktning_botid_flytting$fylke_nr))
3*4*20*2==nrow(flyktning_botid_flytting)
df=spread(flyktning_botid_flytting,botid_3,tabellvariabel,drop=F)
df$alle_kopi=df$alle
df$alle=extract_numeric(df[,6])+extract_numeric(df[,7])
sum(is.na(df$alle))
df = subset(df,select=-alle_kopi)
sum(is.na(df$alle))
df_2=gather(df,botid_3,tabellvariabel,6:8,na.rm=F)
3*4*20*2==nrow(df_2)
write.csv(df_2,"D:/R/imdikator-munch/data_flat_output/flyktning_botid_flytting-fylke-2015.csv",row.names=F)
sosialhjelp <- read.csv("D:/R/imdikator-munch/data_flat_input/sosialhjelp_2013-2014.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
sosialhjelp <- read.csv("D:/R/imdikator-munch/data_flat_input/sosialhjelp_2013-2014.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sosialhjelp)
levels(as.factor(names(sosialhjelp)))
levels(as.factor(sosialhjelp))
levels(as.factor(sosialhjelp$aar))
levels(as.factor(sosialhjelp[,2:3))
levels(as.factor(sosialhjelp[,2:3]))
levels(as.factor(sosialhjelp$kommune_nr))
levels(as.factor(sosialhjelp$fylke_nr))
levels(as.factor(sosialhjelp$bydel_nr))
levels(as.factor(sosialhjelp$naringsregion_nr))
sosialhjelp$fylke_nr[sosialhjelp$fylke_nr=="0"]="00"
levels(as.factor(sosialhjelp$fylke_nr))
flyktning_botid_flytting$enhet[flyktning_botid_flytting$enhet=="person"]="personer"
sosialhjelp$enhet[sosialhjelp$enhet=="person"]="personer"
nlevels(as.factor(sosialhjelp$fylke_nr))
nlevels(as.factor(sosialhjelp$bydel_nr))
nlevels(as.factor(sosialhjelp$kommune_nr))-1
nlevels(as.factor(sosialhjelp$naringsregion_nr))-1
nlevels(as.factor(sosialhjelp$fylke_nr))-1
(18*3*3*2)+(428*3*3*2)+(83*3*3*2)+(20*3*3*2)
nlevels(as.factor(sosialhjelp$bydel_nr))-1
nlevels(as.factor(sosialhjelp$kommune_nr))-1
nlevels(as.factor(sosialhjelp$naringsregion_nr))-1
nlevels(as.factor(sosialhjelp$fylke_nr))-1
(18*3*3*2)+(428*3*3*2)+(83*3*3*2)+(20*3*3*2)
(18*3*3*2*2)+(428*3*3*2*2)+(83*3*3*2*2)+(20*3*3*2*2)
nrow(sosialhjelp)==(18*3*3*2*2)+(428*3*3*2*2)+(83*3*3*2*2)+(20*3*3*2*2)
write.csv(sosialhjelp,"D:/R/imdikator-munch/data_flat_output/sosialhjelp-alle-2013_2014.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(grunnskolepoeng)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
View(grunnskolepoeng)
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$aar[grunnskolepoeng$aar=="2014-2015"]="2015"
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
levels(as.factor(grunnskolepoeng$aar))
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
18*3*5*4*4
df=spread(grunnskolepoeng,kjonn,tabellvariabel,drop=F)
library(tidyr)
df=spread(grunnskolepoeng,kjonn,tabellvariabel,drop=F)
View(df)
df=spread(grunnskolepoeng,innvkat_5,tabellvariabel,drop=F)
df=spread(grunnskolepoeng,vreg_3,tabellvariabel,drop=F)
df=spread(grunnskolepoeng,innvalder_3,tabellvariabel,drop=F)
df=spread(grunnskolepoeng,invalder_3,tabellvariabel,drop=F)
df=spread(grunnskolepoeng,innvkat_5,tabellvariabel,drop=F)
?subset
df_grunn = subset(grunnskolepoeng,subset=c(vreg_3=="alle"&invalder_3=="alle"))
View(df_grunn)
df_grunn = subset(grunnskolepoeng,subset=c(vreg_3=="alle"&vreg_3=="NULL"&invalder_3=="alle"&invalder_3=="NULL"))
df_grunn = subset(grunnskolepoeng,subset=c(vreg_3=="alle"|vreg_3=="NULL"&invalder_3=="alle"|invalder_3=="NULL"))
View(df_grunn)
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
View(df_grunn)
nlevels(as.factor(grunnskolepoeng$bydel_nr))
17*3*5
17*3*5*2
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
View(df_innv)
nlevels(as.factor(grunnskolepoeng$innvkat_5))
nlevels(as.factor(df_innv$innvkat_5))
17*3*1*3*3*2
library(jsonlite)
jsonData <- fromJSON("parameters/dimensions.json")
View(jsonData)
?fromJSON
jsonData <- fromJSON("parameters/dimensions.json",flatten=T)
View(jsonData)
names(jsonData)
names(jsonData$variables)
jsonData <- fromJSON("parameters/dimensions.json")
names(jsonData$variables)
a = unlist(jsonData$variables)
a = unlist(jsonData$variables,recursive=F)
jsonData$variables[[1]]
a= jsonData$variables[[2]]
View(a)
a= jsonData$variables[[1]]
View(a)
a= fromJSON(jsonData$variables)
variables = toJSON(jsonData$variables)
df_variables = fromJSON(variables)
df_variables = fromJSON(variables,flatten=T)
write.csv(grunnskolepoeng,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-bydel-2014.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
#logisk: 18 bydeler, 3 kjønn, 5 innvkat, 4 vreg, 4 invalder
18*3*5*4*4
library(tidyr)
df=spread(grunnskolepoeng,innvkat_5,tabellvariabel,drop=F)
#noe må gjøres med denne, kanskje tilsvarende som for flyktninger: skjære ut innvandrere som vi har mer informasjon om til egen tabell
#kun hvis deler er lopsided, blir ulike headergroups? hvis ikke...
#1: grunnsettet - 17 bydeler * 3 kjønn * 5innvkat * 2 enheter
17*3*5*2
nlevels(as.factor(grunnskolepoeng$bydel_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
nlevels(as.factor(df_innv$innvkat_5))
17*3*1*3*3*2
#alle observasjoner er her, men hva skjer ved innlesning? Får vi headergroups som kan brukes?
write.csv(grunnskolepoeng,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-bydel-2014.csv",row.names=F)
View(df_grunn)
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
17*3*5*2
nlevels(as.factor(grunnskolepoeng$bydel_nr))
nrow(grunnskolepoeng_innvkat5)==17*3*5*2
View(df_innv)
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==17*3*1*3*3*2
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-bydel-2014.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2015_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
View(grunnskolepoeng)
grunnskolepoeng$aar[grunnskolepoeng$aar=="2014-2015"]="2015"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$bydel_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==17*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-bydel-2015.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==17*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-bydel-2015.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_bydel_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
#logisk: 18 bydeler, 3 kjønn, 5 innvkat, 4 vreg, 4 invalder
18*3*5*4*4
library(tidyr)
df=spread(grunnskolepoeng,innvkat_5,tabellvariabel,drop=F)
#noe må gjøres med denne, kanskje tilsvarende som for flyktninger: skjære ut innvandrere som vi har mer informasjon om til egen tabell
#kun hvis deler er lopsided, blir ulike headergroups? hvis ikke...
nlevels(as.factor(grunnskolepoeng$bydel_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
#1: grunnsettet - 17 bydeler * 3 kjønn * 5innvkat * 2 enheter
nrow(grunnskolepoeng_innvkat5)==17*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-bydel-2014.csv",row.names=F)
#setter opp en ny tabell med tabell_navn grunnskolepoeng_innvandrere
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==17*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-bydel-2014.csv",row.names=F)
View(grunnskolepoeng_innvkat5)
View(grunnskolepoeng_innvandrere)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_kommune_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
View(grunnskolepoeng)
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$bydel_nr))
nlevels(as.factor(grunnskolepoeng$kommune_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==427*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-kommune-2014.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==427*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-kommune-2014.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_kommune_2015_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2014-2015"]="2015"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$kommune_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==427*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-kommune-2015.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==427*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-kommune-2015.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_naringsregion_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_næringsregion_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
View(grunnskolepoeng)
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$naringsregion_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==84*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-naringsregion-2014.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==84*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-naringsregion-2014.csv",row.names=F)
#næringsregion - 2015
# aar er feil - må kodes som siste året i intervallet, avgangsåret.
# person må bli personer
# logiske sjekker
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_næringsregion_2015_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2014-2015"]="2015"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$naringsregion_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==84*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-naringsregion-2015.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==84*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-naringsregion-2015.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_fylke_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
View(grunnskolepoeng)
nlevels(as.factor(grunnskolepoeng$fylke_nr))
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_fylke_2014_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2013-2014"]="2014"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$fylke_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==21*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-fylke-2014.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==21*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-fylke-2014.csv",row.names=F)
# fylke - 2015
# aar er feil - må kodes som siste året i intervallet, avgangsåret.
# person må bli personer
# logiske sjekker
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/grunnskolepoeng_fylke_2015_ny.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng$aar[grunnskolepoeng$aar=="2014-2015"]="2015"
grunnskolepoeng$enhet[grunnskolepoeng$enhet=="person"]="personer"
nlevels(as.factor(grunnskolepoeng$fylke_nr))
df_grunn = subset(grunnskolepoeng,subset=c((vreg_3=="alle"|vreg_3=="NULL")&(invalder_3=="alle"|invalder_3=="NULL")))
grunnskolepoeng_innvkat5 = subset(df_grunn,select=-c(vreg_3,invalder_3))
nrow(grunnskolepoeng_innvkat5)==21*3*5*2
write.csv(grunnskolepoeng_innvkat5,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng-fylke-2015.csv",row.names=F)
df_innv = subset(grunnskolepoeng,subset=c(vreg_3!="NULL"|invalder_3!="NULL"))
grunnskolepoeng_innvandrere = subset(df_innv,select=-innvkat_5)
nrow(grunnskolepoeng_innvandrere)==21*3*1*3*3*2
grunnskolepoeng_innvandrere$tabell_navn="grunnskolepoeng_innvandrere"
write.csv(grunnskolepoeng_innvandrere,"D:/R/imdikator-munch/data_flat_output/grunnskolepoeng_innvandrere-fylke-2015.csv",row.names=F)
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=";", dec=",",colClasses="character")
grunnskolepoeng <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(grunnskolepoeng)
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
nlevels(as.factor(videregaende_fullfort$fylke_nr))
?subset
nrow(subset(videregaende_fullfort,fylke_nr!=NULL))
nrow(subset(videregaende_fullfort,fylke_nr!="NULL"))
nrow(subset(videregaende_fullfort,fylke_nr!="NULL"))==20*5*3*2
20*5*3*2
df = subset(videregaende_fullfort,fylke_nr!="NULL")
View(df)
nlevels(as.factor(df$fylke_nr))
library(tidyr)
df_2=spread(df,invkat_5,tabellvariabel,drop=F)
View(df_2)
df = subset(videregaende_fullfort,naringsregion_nr!="NULL")
nlevels(as.factor(df$naringsregion_nr))
nrow(subset(videregaende_fullfort,fylke_nr!="NULL"))==nlevels(as.factor(df$naringsregion_nr))*5*3*2
nrow(subset(videregaende_fullfort,naringsregion_nr!="NULL"))==nlevels(as.factor(df$naringsregion_nr))*5*3*2
nrow(df)==nlevels(as.factor(df$naringsregion_nr))*5*3*2
nrow(df)
nlevels(as.factor(df$naringsregion_nr))*5*3*2
nlevels(as.factor(df$naringsregion_nr))
df_2=spread(df,invkat_5,tabellvariabel,drop=F)
df = subset(videregaende_fullfort,kommune_nr!="NULL")
nrow(df)==nlevels(as.factor(df$kommune_nr))*5*3*2
nrow(df)
nlevels(as.factor(df$kommune_nr))*5*3*2
df = subset(videregaende_fullfort,bydel_nr!="NULL")
nrow(df)==nlevels(as.factor(df$bydel_nr))*5*3*2
df_2=spread(df,invkat_5,tabellvariabel,drop=F)
nrow(df)
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2010.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
#geoenheter * 5 innvkat * 3 kjønn * 2 enheter
df = subset(videregaende_fullfort,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*5*3*2
df = subset(videregaende_fullfort,naringsregion_nr!="NULL")
nrow(df)-nlevels(as.factor(df$naringsregion_nr))*5*3*2
df = subset(videregaende_fullfort,kommune_nr!="NULL")
nrow(df)-nlevels(as.factor(df$kommune_nr))*5*3*2
df = subset(videregaende_fullfort,bydel_nr!="NULL")
nrow(df)-nlevels(as.factor(df$bydel_nr))*5*3*2
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2011.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
df = subset(videregaende_fullfort,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*5*3*2
df = subset(videregaende_fullfort,naringsregion_nr!="NULL")
nrow(df)-nlevels(as.factor(df$naringsregion_nr))*5*3*2
df = subset(videregaende_fullfort,kommune_nr!="NULL")
nrow(df)-nlevels(as.factor(df$kommune_nr))*5*3*2
nrow(df)
nlevels(as.factor(df$kommune_nr))
View(videregaende_fullfort)
levels(as.factor(videregaende_fullfort$invkat_5))
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
levels(as.factor(videregaende_fullfort$invkat_5))
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab34_2010.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
levels(as.factor(videregaende_fullfort$invkat_5))
videregaende_fullfort <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_1_60a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(videregaende_fullfort)
sysselsatte_innvandringsgrunn <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_1_60a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
sysselsatte_innvandringsgrunn <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_1_60a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_innvandringsgrunn)
levels(as.factor(sysselsatte_innvandringsgrunn$kommune_nr))
nlevels(as.factor(sysselsatte_innvandringsgrunn$kommune_nr))
levels(as.factor(sysselsatte_innvandringsgrunn$innvgrunn_6))
levels(as.factor(sysselsatte_innvandringsgrunn$aar))
levels(as.factor(sysselsatte_innvandringsgrunn$enhet))
df = subset(videregaende_fullfort,aar=="2014")
df = subset(sysselsatte_innvandringsgrunn,aar=="2014")
nrow(df)-nlevels(as.factor(df$kommune_nr))*5*3*2
nrow(df)
nlevels(as.factor(df$kommune_nr))
nlevels(as.factor(df$kommune_nr))*5*3*2
sysselsatte_innvandringsgrunn <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_1_612a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
sysselsatte_innvandringsgrunn <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_9_612a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_innvandringsgrunn)
sysselsatte_innvkat_alder <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_9_612a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
sysselsatte_innvkat_alder <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_9_612a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_innvkat_alder)
levels(as.factor(sysselsatte_innvkat_alder$arbeidsalder_18_69))
library(tidyr)
sysselsatte_botid <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_13_62a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_botid)
nlevels(as.factor(sysselsatte_botid$kommune_nr))
levels(as.factor(sysselsatte_botid$botid_5))
levels(as.factor(sysselsatte_botid$aar))
levels(as.factor(sysselsatte_botid$enhet))
df = subset(sysselsatte_botid,aar=="2014")
nrow(df)-nlevels(as.factor(df$kommune_nr))*4*2
View(df)
sysselsatte_botid_land <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_17_631a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_botid_land)
nlevels(as.factor(sysselsatte_botid_land$kommune_nr))
levels(as.factor(sysselsatte_botid_land$botid_5))
levels(as.factor(sysselsatte_botid_land$vvreg_3))
levels(as.factor(sysselsatte_botid_land$vreg_3))
levels(as.factor(sysselsatte_botid$aar))
levels(as.factor(sysselsatte_botid_land$aar))
levels(as.factor(sysselsatte_botid_land$enhet))
df = subset(sysselsatte_botid_land,aar=="2014")
nrow(df)-nlevels(as.factor(df$kommune_nr))*4*3*2
sysselsatte_kjonn_land <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_21_632a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_kjonn_land)
nlevels(as.factor(sysselsatte_kjonn_land$kommune_nr))
levels(as.factor(sysselsatte_kjonn_land$vreg_3))
levels(as.factor(sysselsatte_kjonn_land$kjonn))
levels(as.factor(sysselsatte_kjonn_land$aar))
levels(as.factor(sysselsatte_kjonn_land$enhet))
nrow(df)-nlevels(as.factor(df$kommune_nr))*3*3*2
df = subset(sysselsatte_kjonn_land,aar=="2014")
nrow(df)-nlevels(as.factor(df$kommune_nr))*3*3*2
sysselsatte_land <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/Tab_25_633a.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(sysselsatte_land)
nlevels(as.factor(sysselsatte_land$kommune_nr))
levels(as.factor(sysselsatte_land$vreg_9))
levels(as.factor(sysselsatte_land$aar))
levels(as.factor(sysselsatte_land$enhet))
nrow(df)-nlevels(as.factor(df$kommune_nr))*9*2
df = subset(sysselsatte_land,aar=="2014")
nrow(df)-nlevels(as.factor(df$kommune_nr))*9*2
voksne_videregaende <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab36_2012.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(voksne_videregaende)
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
View(utdanningsniva)
names(utdanningsniva)
levels(as.factor(names(utdanningsniva)))
levels(as.factor(names(utdanningsniva[[]])))
levels(as.factor(names(utdanningsniva[)))
levels(as.factor(utdanningsniva$bydel_nr))
utdanningsniva(utdanningsniva$bydel_nr=="1001")
df=subset(utdanningsniva,utdanningsniva$bydel_nr=="1001")
View(df)
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2010.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df=subset(utdanningsniva,utdanningsniva$bydel_nr=="63")
View(df)
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2011.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2012.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2013.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2014.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
#2009
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2009.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df=subset(utdanningsniva,utdanningsniva$bydel_nr=="1001")
View(df)
levels(as.factor(utdanningsniva$utd_5))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
View(df)
levels(as.factor(df$invkat_3))
levels(as.factor(df$kjonn))
levels(as.factor(df$utd_5))
spread(df,utd_5,tabellvariabel)
test = spread(df,utd_5,tabellvariabel)
?spread
test = spread(df,utd_5,tabellvariabel,drop=F)
View(test)
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2010.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2011.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2012.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2013.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
utdanningsniva <- read.csv("D:/R/imdikator-munch/data_flat_input/diagnose/tab37_2014.csv", row.names=NULL, na.strings="NA", stringsAsFactors=FALSE, sep=",", dec=".",colClasses="character")
names(utdanningsniva)
levels(as.factor(utdanningsniva$bydel_nr))
df = subset(utdanningsniva,fylke_nr!="NULL")
nrow(df)-nlevels(as.factor(df$fylke_nr))*3*3*6*2
